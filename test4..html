{"name":"V2G Aggregator ‚Äì Hyperline UI (Single‚Äëfile HTML)","type":"code/html","content":"\n<html lang="en">\n
\n <meta charset="UTF-8" />\n <meta name="viewport" content="width=device-width, initial-scale=1" />\n V2G Aggregator ‚Äì Hyperline UI\n \n /* ====== Design Tokens (Light/Dark) ====== <em>/\n :root {\n --bg: #f6f8fb;\n --panel: #ffffff;\n --panel-alt: #eef2f6;\n --text: #0f172a;\n --muted: #475569;\n --brand: #2166c9;\n --brand-2: #0e927c;\n --accent: #b83280;\n --ok: #2cae74;\n --warn: #eab308;\n --error: #ef4444;\n --card: #f1f5f9;\n --border: #e5e7eb;\n --shadow: 0 10px 25px rgba(2, 6, 23, .08);\n --radius: 14px;\n }\n [data-theme=&quot;dark&quot;] {\n --bg: #0b1220;\n --panel: #0f172a;\n --panel-alt: #0b1324;\n --text: #e5e7eb;\n --muted: #9aa6b2;\n --brand: #4ea1ff;\n --brand-2: #39c7b0;\n --accent: #ff71c3;\n --ok: #47e7a0;\n --warn: #ffd86b;\n --error: #ff7a7a;\n --card: #0b1324;\n --border: #1f2937;\n --shadow: 0 10px 30px rgba(0,0,0,.45);\n }\n\n * { box-sizing: border-box; }\n html, body { height: 100%; }\n body {\n margin: 0; background: var(--bg); color: var(--text);\n font: 14px/1.45 &quot;Inter&quot;, &quot;Segoe UI&quot;, system-ui, -apple-system, Arial, sans-serif;\n }\n\n /</em> ====== App Shell ====== <em>/\n .app { display: grid; grid-template-columns: 260px 1fr; min-height: 100dvh; }\n @media (max-width: 1024px) { .app { grid-template-columns: 80px 1fr; } }\n\n /</em> Sidebar <em>/\n .sidebar {\n position: sticky; top: 0; height: 100dvh; padding: 18px; background: var(--panel);\n border-right: 1px solid var(--border); box-shadow: var(--shadow);\n }\n .logo { display: flex; gap: 10px; align-items: center; font-weight: 800; letter-spacing: .3px; }\n .logo-badge {\n width: 36px; height: 36px; display: grid; place-items: center; border-radius: 9px;\n background: linear-gradient(135deg, var(--brand), var(--brand-2)); color: #fff; font-weight: 900;\n box-shadow: 0 6px 16px rgba(33,102,201,.35);\n }\n .nav { margin-top: 24px; display: grid; gap: 6px; }\n .nav a {\n display: flex; align-items: center; gap: 12px; padding: 10px 12px; border-radius: 10px;\n color: var(--muted); text-decoration: none; transition: .2s ease; font-weight: 600;\n }\n .nav a:hover { background: var(--panel-alt); color: var(--text); }\n .nav a.active { background: linear-gradient(90deg, rgba(33,102,201,.12), transparent); color: var(--brand); }\n .nav svg { width: 18px; height: 18px; opacity: .9; }\n\n /</em> Header <em>/\n .header {\n display: grid; grid-template-columns: 1fr auto; gap: 12px; align-items: center;\n padding: 18px 22px; position: sticky; top: 0; z-index: 10; background: var(--bg);\n border-bottom: 1px solid var(--border);\n }\n .search {\n display: flex; align-items: center; gap: 10px; background: var(--panel);\n padding: 10px 14px; border-radius: 12px; border: 1px solid var(--border);\n box-shadow: var(--shadow);\n }\n .search input { border: 0; outline: 0; flex: 1; background: transparent; color: var(--text); }\n .actions { display: flex; gap: 10px; align-items: center; }\n .btn {\n border: 1px solid var(--border); background: var(--panel); padding: 10px 12px; border-radius: 12px;\n display: inline-flex; align-items: center; gap: 10px; cursor: pointer; font-weight: 700;\n box-shadow: var(--shadow);\n }\n .btn.primary { background: var(--brand); color: #fff; border-color: transparent; }\n\n /</em> Main <em>/\n .main { padding: 22px; }\n\n /</em> KPI Cards <em>/\n .kpis {\n display: grid; gap: 16px; grid-template-columns: repeat(4, 1fr);\n }\n @media (max-width: 1200px){ .kpis { grid-template-columns: repeat(2, 1fr);} }\n @media (max-width: 640px){ .kpis { grid-template-columns: 1fr; } }\n\n .card {\n background: var(--panel); border: 1px solid var(--border); border-radius: var(--radius);\n box-shadow: var(--shadow); padding: 16px; position: relative; overflow: hidden;\n }\n .card h4 { margin: 0; font-size: 13px; color: var(--muted); }\n .card .value { margin-top: 6px; font-size: 28px; font-weight: 800; letter-spacing: .2px; }\n .trend { font-size: 12px; margin-top: 4px; color: var(--muted); }\n\n /</em> Grid: Flow + Charts + Schedule <em>/\n .layout {\n display: grid; gap: 16px; grid-template-columns: 1.2fr 1fr; grid-auto-rows: min-content;\n margin-top: 18px;\n }\n @media (max-width: 1200px){ .layout { grid-template-columns: 1fr; } }\n\n .section-title { font-weight: 800; margin: 6px 0 12px; display: flex; align-items: center; gap: 10px; }\n .section-title .dot { width: 8px; height: 8px; border-radius: 50%; background: var(--brand); box-shadow: 0 0 0 4px rgba(33,102,201,.15); }\n\n /</em> Architecture Flow <em>/\n .flow-box { padding: 14px; border-radius: var(--radius); background: var(--panel); border: 1px solid var(--border); box-shadow: var(--shadow); }\n .flow { display: grid; grid-template-columns: 1fr 60px 1fr; gap: 12px; align-items: center; }\n .module { background: var(--panel-alt); border: 1px dashed var(--border); border-radius: 12px; padding: 10px; text-align: center; font-weight: 700; }\n .arrow { text-align: center; font-size: 20px; color: var(--brand); }\n\n /</em> Tech Stack Box <em>/\n .stack { background: var(--panel); border: 1px solid var(--border); border-radius: var(--radius); padding: 14px; box-shadow: var(--shadow); }\n .stack strong { color: var(--muted); }\n .stack code { background: var(--card); padding: 2px 6px; border-radius: 6px; }\n\n /</em> Simple Line Chart (Canvas) <em>/\n .chart-card canvas { width: 100%; height: 220px; }\n\n /</em> Schedule Board <em>/\n .schedule {\n display: grid; gap: 10px; grid-template-columns: 120px 1fr; align-items: start;\n background: var(--panel); border: 1px solid var(--border); border-radius: var(--radius); padding: 12px; box-shadow: var(--shadow);\n }\n .timeline { display: grid; grid-template-rows: repeat(24, 42px); gap: 6px; }\n .hour { color: var(--muted); font-size: 12px; text-align: right; padding-right: 6px; }\n .slots { position: relative; border-left: 1px dashed var(--border); min-height: 24</em>42px; }\n .event { position: absolute; left: 8px; right: 8px; border-radius: 10px; padding: 8px 10px; color: #fff; cursor: grab; user-select: none; box-shadow: 0 6px 18px rgba(0,0,0,.12); }\n .event.charge { background: linear-gradient(135deg, var(--brand), var(--brand-2)); }\n .event.discharge { background: linear-gradient(135deg, #8b5cf6, var(--accent)); }\n\n /* Alerts / Activity <em>/\n .rightcol { display: grid; gap: 16px; }\n .list { background: var(--panel); border: 1px solid var(--border); border-radius: var(--radius); padding: 12px; box-shadow: var(--shadow); }\n .list-item { display:flex; align-items:center; gap:10px; padding:10px; border-radius: 10px; }\n .badge { font-size: 11px; padding: 2px 8px; border-radius: 999px; background: var(--card); border:1px solid var(--border); }\n\n /</em> Footer <em>/\n .footer { padding: 16px 22px; color: var(--muted); text-align: center; }\n \n\n\n <div class="app" id="app">\n \n <aside class="sidebar">\n <div class="logo" title="V2G Aggregator">\n <div class="logo-badge">V2G\n <div class="logo-title">Aggregator\n \n <nav class="nav">\n <a href="#overview" class="active">üè† Overview\n <a href="#assets">üöó Assets\n <a href="#schedule">üóìÔ∏è Schedule\n <a href="#markets">üìà Markets\n <a href="#settings">‚öôÔ∏è Settings\n \n \n\n \n \n \n <div class="header">\n <div class="search">\n <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M21 21l-4.35-4.35" stroke="currentColor" stroke-width="2" stroke-linecap="round"/><circle cx="10.5" cy="10.5" r="7" stroke="currentColor" stroke-width="2"/>\n <input id="searchInput" placeholder="Search vehicles, chargers, sites‚Ä¶" />\n \n <div class="actions">\n <button class="btn" id="themeBtn" title="Toggle theme">üåì Theme\n <button class="btn primary" id="newEventBtn">Ôºã New Event\n \n \n\n <main class="main">\n \n <div class="kpis">\n <div class="card">\n 
Active EVs
\n <div class="value" id="kpi-evs">412\n <div class="trend">+2.4% today\n \n <div class="card">\n 
Grid Events
\n <div class="value" id="kpi-events">7\n <div class="trend">Demand Response Window\n \n <div class="card chart-card">\n 
Revenue (Today)
\n <div class="value" id="kpi-rev">$12,480\n <canvas id="revChart" aria-label="Revenue sparkline" role="img">\n \n <div class="card">\n 
CO‚ÇÇ Saved
\n <div class="value" id="kpi-co2">6.8 t\n <div class="trend">vs. baseline\n \n \n\n <div class="layout">\n <div class="leftcol">\n \n <div class="stack" id="overview">\n <div class="section-title"><span class="dot">Platform Stack\n <div style="display:grid; gap:8px;">\n 
Front‚ÄëEnd: React + Material UI, Next.js, or Vue
\n 
Back‚ÄëEnd: Node/Express, Python (FastAPI/Django), Go
\n 
Realtime & Data: Kafka, MQTT, Redis
\n 
Storage/Cloud: AWS/Azure/GCP, TimescaleDB, InfluxDB, S3
\n 
Protocols: ISO 15118, OCPP 2.0, REST, gRPC
\n \n \n\n \n <div class="flow-box" style="margin-top:16px;">\n <div class="section-title"><span class="dot">Architecture Flow\n\n <div class="flow" aria-label="EVs to Stations">\n <div class="module">EVs & Chargers
(ISO 15118, CHAdeMO)\n <div class="arrow">‚ü∂\n <div class="module">Smart Charging Stations
(OCPP 2.0)\n \n <div class="flow">\n <div class="module">Realtime Telemetry
Kafka / MQTT\n <div class="arrow">‚ü∂\n <div class="module">Data Layer
TimescaleDB, S3\n \n <div class="flow">\n <div class="module">Control & Optimization Engine
MPC / AI / ML\n <div class="arrow">‚ü∂\n <div class="module">Grid & Market Integration
REST / gRPC\n \n <div class="flow">\n <div class="module">Security & Settlement
Blockchain / Smart Contracts\n <div class="arrow">‚ü∂\n <div class="module">External APIs & Middleware
Docker / Kubernetes\n \n <div class="flow">\n <div class="module">User Interface Layer
Fleet Portal (React)\n <div class="arrow">‚ü∂\n <div class="module">Mobile App
Ops On‚Äëthe‚ÄëGo\n \n \n\n \n <div class="section-title" id="schedule" style="margin-top:16px;"><span class="dot">Charge/Discharge Schedule\n <div class="schedule">\n <div class="timeline">\n \n <div class="hour">00:00\n <div class="hour">01:00\n <div class="hour">02:00\n <div class="hour">03:00\n <div class="hour">04:00\n <div class="hour">05:00\n <div class="hour">06:00\n <div class="hour">07:00\n <div class="hour">08:00\n <div class="hour">09:00\n <div class="hour">10:00\n <div class="hour">11:00\n <div class="hour">12:00\n <div class="hour">13:00\n <div class="hour">14:00\n <div class="hour">15:00\n <div class="hour">16:00\n <div class="hour">17:00\n <div class="hour">18:00\n <div class="hour">19:00\n <div class="hour">20:00\n <div class="hour">21:00\n <div class="hour">22:00\n <div class="hour">23:00\n \n <div class="slots" id="slots" aria-label="Draggable events area">\n \n <div class="event charge" data-start="6" data-end="8" style="top: calc(642px + 6px); height: calc(242px - 6px);">Charge ‚Äì Depot A\n <div class="event discharge" data-start="18" data-end="20" style="top: calc(1842px + 6px); height: calc(242px - 6px);">Discharge ‚Äì DR Market\n \n \n \n\n \n <div class="rightcol">\n <div class="list" id="markets">\n <div class="section-title"><span class="dot">Live Markets\n <div class="list-item">\n <span class="badge">NEM (AU)\n <div style="font-weight:700;">Price: <span id="px1">$118/MWh\n \n <div class="list-item">\n <span class="badge">CAISO\n <div style="font-weight:700;">Price: <span id="px2">$92/MWh\n \n <div class="list-item">\n <span class="badge">PJM\n <div style="font-weight:700;">Price: <span id="px3">$76/MWh\n \n \n\n <div class="list">\n <div class="section-title"><span class="dot">Alerts & Health\n <div class="list-item" style="justify-content:space-between;">\n 
Battery SoH below 80% on Site‚Äë12
\n <span class="badge" style="background:rgba(234,179,8,.15); border-color:transparent; color:var(--warn);">‚ö†Ô∏é Check\n \n <div class="list-item" style="justify-content:space-between;">\n 
ISO event window opened (17:00‚Äì20:00)
\n <span class="badge" style="background:rgba(33,102,201,.15); border-color:transparent; color:var(--brand);">Live\n \n <div class="list-item" style="justify-content:space-between;">\n 
3 chargers offline at Depot‚ÄëB
\n <span class="badge" style="background:rgba(239,68,68,.15); border-color:transparent; color:var(--error);">Action\n \n \n\n <div class="card">\n 
Notes
\n <p style="margin:.5em 0 0;color:var(--muted)">Drag events on the schedule to reslot hours. Click ‚ÄúÔºã New Event‚Äù to add a template charge/discharge block. Use üåì to toggle dark mode.\n \n \n \n\n <footer class="footer">¬©Ô∏è 2025 V2G Aggregator ‚Ä¢ Hyperline UI ‚Ä¢ Built for quick stakeholder demos\n \n \n \n\n \n // ====== Theme Toggle ======\n const root = document.documentElement;\n const themeBtn = document.getElementById('themeBtn');\n const savedTheme = localStorage.getItem('theme');\n if (savedTheme) document.body.setAttribute('data-theme', savedTheme);\n themeBtn.addEventListener('click', () =&gt; {\n const current = document.body.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';\n document.body.setAttribute('data-theme', current);\n localStorage.setItem('theme', current);\n });\n\n // ====== KPI Sparkline (vanilla canvas) ======\n const canvas = document.getElementById('revChart');\n const ctx = canvas.getContext('2d');\n function drawChart(values){\n const w = canvas.clientWidth, h = canvas.clientHeight;\n canvas.width = w * devicePixelRatio; canvas.height = h * devicePixelRatio;\n ctx.scale(devicePixelRatio, devicePixelRatio);\n ctx.clearRect(0,0,w,h);\n const max = Math.max(...values), min = Math.min(...values);\n const xStep = w/(values.length-1);\n ctx.beginPath();\n values.forEach((v,i)=&gt;{\n const x = i</em>xStep;\n const y = h - ((v-min)/(max-min+1e-6))*h;\n i?ctx.lineTo(x,y):ctx.moveTo(x,y);\n });\n ctx.lineWidth = 2; ctx.strokeStyle = getComputedStyle(document.body).getPropertyValue('--brand');\n ctx.stroke();\n // gradient fill\n const g = ctx.createLinearGradient(0,0,0,h);\n g.addColorStop(0, getComputedStyle(document.body).getPropertyValue('--brand'));\n g.addColorStop(1, 'transparent');\n ctx.lineTo(w,h); ctx.lineTo(0,h); ctx.closePath(); ctx.fillStyle = g; ctx.fill();\n }\n const series = Array.from({length: 32}, ()=&gt; 800 + Math.random()*600);\n drawChart(series);\n window.addEventListener('resize', ()=&gt; drawChart(series));\n\n // ====== Fake market tickers ======\n function randAround(n, d=3){ return (n + (Math.random()-0.5)*d).toFixed(0); }\n setInterval(()=&gt;{\n document.getElementById('px1').textContent = <code>$${randAround(118)}/MWh</code>;\n document.getElementById('px2').textContent = <code>$${randAround(92)}/MWh</code>;\n document.getElementById('px3').textContent = <code>$${randAround(76)}/MWh</code>;\n }, 3000);\n\n // ====== Schedule: Drag to move events (hour slots) ======\n const slots = document.getElementById('slots');\n let dragging = null; let startY = 0; let startTop = 0;\n\n function posToHour(y){\n const rect = slots.getBoundingClientRect();\n const rel = Math.max(0, Math.min(y - rect.top, rect.height - 1));\n return Math.round(rel / 42); // 42px row height\n }\n\n function setEventPosition(el, start, end){\n el.dataset.start = start; el.dataset.end = end;\n el.style.top = <code>calc(${start}*42px + 6px)</code>;\n el.style.height = <code>calc(${end-start}*42px - 6px)</code>;\n el.setAttribute('aria-label', <code>${el.textContent} from ${String(start).padStart(2,'0')}:00 to ${String(end).padStart(2,'0')}:00</code>);\n }\n\n slots.querySelectorAll('.event').forEach(ev =&gt; {\n ev.addEventListener('pointerdown', (e)=&gt;{\n dragging = ev; startY = e.clientY; startTop = ev.offsetTop; ev.setPointerCapture(e.pointerId);\n ev.style.cursor = 'grabbing';\n });\n });\n\n slots.addEventListener('pointermove', (e)=&gt;{\n if(!dragging) return;\n const delta = e.clientY - startY;\n const rows = Math.round(delta/42);\n const newStart = Math.max(0, Math.min(23, Number(dragging.dataset.start) + rows));\n const dur = Number(dragging.dataset.end) - Number(dragging.dataset.start);\n const newEnd = Math.max(newStart + 1, Math.min(24, newStart + dur));\n setEventPosition(dragging, newStart, newEnd);\n });\n\n window.addEventListener('pointerup', ()=&gt;{ if(dragging){ dragging.style.cursor = 'grab'; dragging = null; }});\n\n // ====== Create new event template ======\n document.getElementById('newEventBtn').addEventListener('click', ()=&gt;{\n const el = document.createElement('div');\n el.className = 'event charge'; el.textContent = 'Charge ‚Äì New Block';\n const start = 9 + Math.floor(Math.random()*3); const end = start + 2;\n el.setAttribute('role','button'); el.tabIndex = 0;\n setEventPosition(el, start, end);\n el.addEventListener('pointerdown', (e)=&gt;{ dragging = el; startY = e.clientY; startTop = el.offsetTop; el.setPointerCapture(e.pointerId); el.style.cursor='grabbing'; });\n slots.appendChild(el);\n });\n \n\n"}